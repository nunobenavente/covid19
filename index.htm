<!doctype html>
<html>
<head>
<meta charset="utf-8">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

<script src="https://www.amcharts.com/lib/4/core.js"></script>
<script src="https://www.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/dark.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
<title>Dados COVID-19</title>

<style>
#logLog {
	width: 60%;
	/*height: 800px;*/
	float:left;
	margin: 5px 5px;
	padding: 10px;
  	border: 0px solid #aaaaaa;
  	background-color: #222a35;
}

#loglogAmchartsDiv {
	background-color:#222;	
	width: 60%;
	height: 800px;
	margin: 10px 10px 10px 10px;
	float: left;
/*	border: 1px solid #aaa;*/
}

#letalidadediv {
  width: 35%;
  height: 360px;
  margin: 10px 20px 20px 10px;
  float:right;
  /*clear:both;*/
 }
 #casospormilhaodiv {
  width: 35%;
  height: 360px;
  margin: 10px 20px 20px 10px;
  float:right;
  /*clear:both;*/
 }
</style>

</head>

<body style="background-color:#222">
<!--	<div id="logLog" class="container">
    	<canvas id="logLogCanvas" style="background-color:#222a35"></canvas>
    </div>
	<div id="barrasLinear" class="container">
    	<canvas id="barrasCanvas" style="background-color:#222a35"></canvas>
    </div>-->
    <div id="loglogAmchartsDiv"></div>
    <div id="letalidadediv"></div>
    
    
    <div id="casospormilhaodiv"></div>
    
    <script>

		

		/**
		 * ---------------------------------------
		 * This demo was created using amCharts 4.
		 * 
		 * For more information visit:
		 * https://www.amcharts.com/
		 * 
		 * Documentation is available at:
		 * https://www.amcharts.com/docs/v4/
		 * ---------------------------------------
		 */
		
		// Themes begin
		am4core.useTheme(am4themes_animated);
		am4core.useTheme(am4themes_dark);
		// Themes end
		
		
		// Create chart instance
		var loglogAmcharts = am4core.create("loglogAmchartsDiv", am4charts.XYChart);
		
		loglogAmcharts.dataSource.url = "./dadosMundo.json";
		
		loglogAmcharts.legend = new am4charts.Legend();
		
		
		 
		loglogAmcharts.colors.list = [
		  am4core.color("#EEE"),
		  am4core.color("#FFE119"),
		  am4core.color("#FABEBE"),
		  am4core.color("#AAFFC3"),
		  
		  am4core.color("#000075"),
		  am4core.color("#FF0000"),
		  
		  am4core.color("#00AA00"),
		  am4core.color("#FF8832"),
		  am4core.color("#00CC00"),
		  am4core.color("#008888"),
		  am4core.color("#4363d8"),
		  am4core.color("#CCC")
		];
		
		// Create axes
		var opacidadeLinhas = 0.6;
		
		var valueAxisX = loglogAmcharts.xAxes.push(new am4charts.ValueAxis());
		valueAxisX.title.text = 'TOTAL DE CASOS (escala LOG) - clique na legenda para ligar/desligar países';
		//valueAxisX.renderer.minGridDistance = 10;
		valueAxisX.renderer.labels.template.fontSize = 10;
		valueAxisX.logarithmic = true;
		
		// Create value axis
		var valueAxisY = loglogAmcharts.yAxes.push(new am4charts.ValueAxis());
		valueAxisY.title.text = 'CASOS NOS ÚLTIMOS 7 DIAS (escala LOG)';
		valueAxisY.renderer.labels.template.fontSize = 10;
		valueAxisY.logarithmic = true;
		
		var title = loglogAmcharts.titles.create();
		title.text = "[bold font-size: 18]COVID-19 no Mundo - Evolução do surto[/]\n";
		title.textAlign = "middle";
		
		
		
		
	//	valueAxisX.min = 0;
	//	valueAxisX.max = 6000;
		
		
		// Create series
		var lineSeries = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries.dataFields.valueY = "pty";
		lineSeries.dataFields.valueX = "ptx";
		lineSeries.strokeOpacity = opacidadeLinhas;
		lineSeries.strokeWidth = 2;
		lineSeries.name = "PT";
	
		
//		var segment = lineSeries.segments.template;
//  segment.interactionsEnabled = true;
//
//  var hoverState = segment.states.create("hover");
//  hoverState.properties.strokeWidth = 5;
//
//  var dimmed = segment.states.create("dimmed");
//  dimmed.properties.stroke = am4core.color("#dadada");
//
//  segment.events.on("over", function(event) {
//    processOver(event.target.parent.parent.parent);
//  });
//
//  segment.events.on("out", function(event) {
//    processOut(event.target.parent.parent.parent);
//  });
		
		var lineSeries2 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries2.dataFields.valueY = "dey";
		lineSeries2.dataFields.valueX = "dex";
		lineSeries2.strokeOpacity = opacidadeLinhas;
		lineSeries2.name = "DE";
		
		
		var lineSeries3 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries3.dataFields.valueY = "esy";
		lineSeries3.dataFields.valueX = "esx";
		lineSeries3.strokeOpacity = opacidadeLinhas;
		lineSeries3.name = "ES";		
		
		var lineSeries4 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries4.dataFields.valueY = "kry";
		lineSeries4.dataFields.valueX = "krx";
		lineSeries4.strokeOpacity = opacidadeLinhas;
		lineSeries4.name = "KR";		
		
		var lineSeries6 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries6.dataFields.valueY = "gby";
		lineSeries6.dataFields.valueX = "gbx";
		lineSeries6.strokeOpacity = opacidadeLinhas;
		lineSeries6.name = "GB";
		
		var lineSeries7 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries7.dataFields.valueY = "usy";
		lineSeries7.dataFields.valueX = "usx";
		lineSeries7.strokeOpacity = opacidadeLinhas;
		lineSeries7.name = "US";
		
		var lineSeries8 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries8.dataFields.valueY = "bry";
		lineSeries8.dataFields.valueX = "brx";
		lineSeries8.strokeOpacity = opacidadeLinhas;
		lineSeries8.name = "BR";
		
		var lineSeries9 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries9.dataFields.valueY = "nly";
		lineSeries9.dataFields.valueX = "nlx";
		lineSeries9.strokeOpacity = opacidadeLinhas;
		lineSeries9.name = "NL";
		
		var lineSeries10 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries10.dataFields.valueY = "ity";
		lineSeries10.dataFields.valueX = "itx";
		lineSeries10.strokeOpacity = opacidadeLinhas;
		lineSeries10.name = "IT";
		
		var lineSeries11 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries11.dataFields.valueY = "luy";
		lineSeries11.dataFields.valueX = "lux";
		lineSeries11.strokeOpacity = opacidadeLinhas;
		lineSeries11.name = "LU";
		
		var lineSeries12 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries12.dataFields.valueY = "fry";
		lineSeries12.dataFields.valueX = "frx";
		lineSeries12.strokeOpacity = opacidadeLinhas;
		lineSeries12.name = "FR";
		
		var lineSeries5 = loglogAmcharts.series.push(new am4charts.LineSeries());
		lineSeries5.dataFields.valueY = "globaly";
		lineSeries5.dataFields.valueX = "globalx";
		lineSeries5.strokeOpacity = opacidadeLinhas;
		lineSeries5.strokeWidth = 1.5;
		lineSeries5.name = "GLOBAL";
		
			
		
		// Add a bullet
		var bullet = lineSeries.bullets.push(new am4charts.Bullet());
		
		// Add a triangle to act as am arrow
		var arrow = bullet.createChild(am4core.Triangle);
		arrow.horizontalCenter = "middle";
		arrow.verticalCenter = "middle";
		arrow.strokeWidth = 1;
		arrow.fill = loglogAmcharts.colors.getIndex(0);
		arrow.direction = "top";
		arrow.width = 0.8;
		arrow.height = 0.8;
		
		// Add a bullet
		var bullet2 = lineSeries2.bullets.push(new am4charts.Bullet());
		
		// Add a triangle to act as am arrow
		var arrow2 = bullet2.createChild(am4core.Triangle);
		arrow2.horizontalCenter = "middle";
		arrow2.verticalCenter = "middle";
		arrow2.rotation = 180;
		arrow2.strokeWidth = 1;
		arrow2.fill = loglogAmcharts.colors.getIndex(3);
		arrow2.direction = "top";
		arrow2.width = 0.8;
		arrow2.height = 0.8;
		
		
		
				
		
//		lologAmcharts.legend.itemContainers.template.events.on("over", function(event) {
//  processOver(event.target.dataItem.dataContext);
//})
//
//loglogAmcharts.legend.itemContainers.template.events.on("out", function(event) {
//  processOut(event.target.dataItem.dataContext);
//})
//
//function processOver(hoveredSeries) {
//  hoveredSeries.toFront();
//
//  hoveredSeries.segments.each(function(segment) {
//    segment.setState("hover");
//  })
//
//  loglogAmcharts.lineSeries.each(function(series) {
//    if (series != hoveredSeries) {
//      lineSeries.segments.each(function(segment) {
//        segment.setState("dimmed");
//      })
//      series.bulletsContainer.setState("dimmed");
//    }
//  });
//}
//
//function processOut(hoveredSeries) {
//  loglogAmcharts.series.each(function(series) {
//    series.segments.each(function(segment) {
//      segment.setState("default");
//    })
//    series.bulletsContainer.setState("default");
//  });
//}

		// CURSOR XY
		loglogAmcharts.cursor = new am4charts.XYCursor();
		loglogAmcharts.cursor.behavior = "zoomXY"; // zoomX, zoomY, panX, panY, panXY, none, etc
		loglogAmcharts.cursor.lineX.strokeWidth = 0.5;
		//loglogAmcharts.cursor.lineX.strokeDasharray = "";
		loglogAmcharts.cursor.lineY.strokeWidth = 0.5;
		
		//scrollbars
		//loglogAmcharts.scrollbarX = new am4core.Scrollbar(); // funciona mal com o Cursor por isso desliguei
		loglogAmcharts.scrollbarY = new am4core.Scrollbar();
		var scrollbarX = new am4charts.XYChartScrollbar();
		scrollbarX.series.push(lineSeries);
		scrollbarX.series.push(lineSeries2);
		loglogAmcharts.scrollbarX = scrollbarX;
		loglogAmcharts.scrollbarX.parent = loglogAmcharts.bottomAxesContainer;


		
		
		// Create chart instance
		var chart = am4core.create("letalidadediv", am4charts.XYChart);
		
		
		// Add data
		chart.data = [{
			"name": "IT",
			"points": 12.73,
			"color": chart.colors.next(),
			"bullet": "./flags/IT.png",
			//"bullet": "https://www.amcharts.com/lib/images/faces/A04.png"
			"media": 6.19,
			"obitos":19899
		}, {
			"name": "GB",
			"points": 12.47,
			"color": chart.colors.next(),
			"bullet": "./flags/GB.png",
			"media": 6.19,
			"obitos":10629
		}, {
			"name": "NL",
			"points": 10.67,
			"color": chart.colors.next(),
			"bullet": "./flags/NL.png",
			"media": 6.19,
			"obitos":2747
		}, {
			"name": "FR",
			"points": 10.78,
			"color": chart.colors.next(),
			"bullet": "./flags/FR.png",
			"media": 6.19,
			"obitos":14412
		}, {
			"name": "ES",
			"points": 10.32,
			"color": chart.colors.next(),
			"bullet": "./flags/ES.png",
			"media": 6.19,
			"obitos":17489
		}, {
			"name": "BR",
			"points": 5.51,
			"color": chart.colors.next(),
			"bullet": "./flags/BR.png",
			"media": 6.19,
			"obitos":1230
		}, {
			"name": "US",
			"points": 3.97,
			"color": chart.colors.next(),
			"bullet": "./flags/US.png",
			"media": 6.19,
			"obitos":22109
		}, {
			"name": "PT",
			"points": 3.16,
			"color": "green",
			"bullet": "./flags/PT.png",
			"media": 6.19,
			"obitos":535
		}, {
			"name": "DE",
			"points": 2.36,
			"color": chart.colors.next(),
			"bullet": "./flags/DE.png",
			"media": 6.19,
			"obitos":3022
		}, {
			"name": "KR",
			"points": 2.06,
			"color": chart.colors.next(),
			"bullet": "./flags/KR.png",
			"media": 6.19,
			"obitos":217
		}, {
			"name": "LU",
			"points": 2.01,
			"color": chart.colors.next(),
			"bullet": "./flags/LU.png",
			"media": 6.19,
			"obitos": 66
		}];
		
		var title = chart.titles.create();
		title.text = "[bold font-size: 18]Letalidade[/]\n(óbitos/casos confirmados)";
		title.textAlign = "middle";
		
		// Create axes
		var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
		categoryAxis.dataFields.category = "name";
		categoryAxis.renderer.grid.template.disabled = true;
		categoryAxis.renderer.minGridDistance = 30;
		categoryAxis.renderer.inside = true;
		categoryAxis.renderer.labels.template.fill = am4core.color("#fff");
		categoryAxis.renderer.labels.template.fontSize = 10;
		
		var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
		valueAxis.renderer.grid.template.strokeDasharray = "4,4";
		valueAxis.renderer.labels.template.disabled = false;
		//valueAxis.title.text = "%";
		//valueAxis.title.fontSize = 12;
		valueAxis.numberFormatter = new am4core.NumberFormatter();
		valueAxis.numberFormatter.numberFormat = "#'%'"
		//valueAxis.renderer.labels.template.adapter.add("text", function(text) {
		 // return text + "%";});
		valueAxis.renderer.labels.template.fontSize = 10;
		valueAxis.min = 0;
		
		// Do not crop bullets
		chart.maskBullets = false;
		
		// Remove padding
		//chart.paddingBottom = 0;
		
		chart.numberFormatter.numberFormat = "#.00";
		
		// Create series
		var series = chart.series.push(new am4charts.ColumnSeries());
		series.dataFields.valueY = "points";
		series.dataFields.categoryX = "name";
		series.columns.template.propertyFields.fill = "color";
		series.columns.template.propertyFields.stroke = "color";
		series.columns.template.column.cornerRadiusTopLeft = 4;
		series.columns.template.column.cornerRadiusTopRight = 4;
		series.columns.template.tooltipText = "{categoryX}: [bold]{valueY}%[/b] (Óbitos: [bold]{obitos.formatNumber('#')})[/b]";
		
		// Add bullets
		var bullet = series.bullets.push(new am4charts.Bullet());
		var image = bullet.createChild(am4core.Image);
		image.horizontalCenter = "middle";
		image.verticalCenter = "bottom";
		image.dy = 8; // vertical offset. can be negative to move upwards
		image.width = am4core.percent(60); // reducao do tamanho para 60%
		image.y = am4core.percent(100);
		image.propertyFields.href = "bullet";
		image.tooltipText = series.columns.template.tooltipText;
		image.propertyFields.fill = "color";
		image.filters.push(new am4core.DropShadowFilter());
		
		
		//// series da media global (linha)
//		var lineSeries = chart.series.push(new am4charts.LineSeries());
//		lineSeries.name = "Global";
//		lineSeries.dataFields.valueY = "media";
//		lineSeries.dataFields.categoryX = "name";
//		
//		lineSeries.stroke = am4core.color("#eee");
//		lineSeries.strokeWidth = 2;
//		lineSeries.tooltip.label.textAlign = "middle";
//		
//		var bullet = lineSeries.bullets.push(new am4charts.Bullet());
//		bullet.fill = am4core.color("#333"); // tooltips grab fill from parent by default
//		bullet.tooltipText = "[#eee font-size: 12px]MÉDIA GLOBAL:[/][font-weight: bold] {media}%[/]"
//		var circle = bullet.createChild(am4core.Circle);
//		circle.radius = 1;
//		circle.fill = am4core.color("#eee");
//		circle.strokeWidth = 1;

// Create value axis range - LINHA DA MEDIA QUE ATRAVESSA O GRAFICO
		var range = valueAxis.axisRanges.create();
		range.value = 6.19;							// VALOR DA MÉDIA GLOBAL
		range.grid.stroke = am4core.color("#eee");
		range.grid.strokeWidth = 1;
		range.grid.strokeOpacity = 0.9;
		range.label.inside = true;
		var str1 = "[#eee font-size: 12px]MÉDIA GLOBAL: [/][font-weight: bold]";
		range.label.text = str1.concat(range.value.toString(), "%[/]");
		range.label.fill = range.grid.stroke;
		range.label.align = "right";
		range.label.verticalCenter = "bottom";
		chart.seriesContainer.zIndex = -1; // envia a series para tras da linha da media
		
		chart.exporting.menu = new am4core.ExportMenu();


		/////////////////////////////////////////////
		// CASOS POR MILHAO 
		// Create chart instance
		var chart = am4core.create("casospormilhaodiv", am4charts.XYChart);
		
		
		// Add data
		chart.data = [{
			"pais": "IT",
			"points": 2587,
			"color": chart.colors.next(),
			"bullet": "./flags/IT.png"
		}, {
			"pais": "GB",
			"points": 1282,
			"color": chart.colors.next(),
			"bullet": "./flags/GB.png"
		}, {
			"pais": "NL",
			"points": 1494,
			"color": chart.colors.next(),
			"bullet": "./flags/NL.png"
		}, {
			"pais": "FR",
			"points": 1995,
			"color": chart.colors.next(),
			"bullet": "./flags/FR.png"
		}, {
			"pais": "ES",
			"points": 3628,
			"color": chart.colors.next(),
			"bullet": "./flags/ES.png"	
		}, {
			"pais": "BR",
			"points": 107,
			"color": chart.colors.next(),
			"bullet": "./flags/BR.png"
		}, {
			"pais": "US",
			"points": 1704,
			"color": chart.colors.next(),
			"bullet": "./flags/US.png"
		}, {
			"pais": "PT",
			"points": 1639,
			"color": "green",
			"bullet": "./flags/PT.png"
		}, {
			"pais": "DE",
			"points": 1542,
			"color": chart.colors.next(),
			"bullet": "./flags/DE.png"
		}, {
			"pais": "KR",
			"points": 204,
			"color": chart.colors.next(),
			"bullet": "./flags/KR.png"
		}, {
			"pais": "LU",
			"points": 5399,
			"color": chart.colors.next(),
			"bullet": "./flags/LU.png"
			
		}];
		
		var title = chart.titles.create();
		title.text = "[bold font-size: 18]Casos/milhão de habitantes[/]\n";
		title.textAlign = "middle";
		
		// Create axes
		var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
		categoryAxis.dataFields.category = "pais";
		categoryAxis.renderer.grid.template.disabled = true;
		categoryAxis.renderer.minGridDistance = 30;
		categoryAxis.renderer.inside = true;
		categoryAxis.renderer.labels.template.fill = am4core.color("#fff");
		categoryAxis.renderer.labels.template.fontSize = 10;
		
		var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
		valueAxis.renderer.grid.template.strokeDasharray = "4,4";
		valueAxis.renderer.labels.template.disabled = false;
		//valueAxis.title.text = "%";
		//valueAxis.title.fontSize = 12;
		valueAxis.renderer.labels.template.fontSize = 10;
		valueAxis.min = 0;
		valueAxis.max = 6000;
		
		//// axis break
		//var axisBreak = valueAxis.axisBreaks.create();
		//axisBreak.startValue = 3600;
		//axisBreak.endValue = 5000;
		//// fixed axis break
		//var d = (axisBreak.endValue - axisBreak.startValue) / (valueAxis.max - valueAxis.min);
		//axisBreak.breakSize = 0.1 * (1 - d) / d; /// 0.05 means that the break will take 5% of the total value axis height
		//
		//// make break expand on hover
		//var hoverState = axisBreak.states.create("hover");
		//hoverState.properties.breakSize = 1;
		//hoverState.properties.opacity = 0.1;
		//hoverState.transitionDuration = 500;
		//
		//axisBreak.defaultState.transitionDuration = 1000;
		
		// Do not crop bullets
		chart.maskBullets = false;
		
		// Remove padding
		chart.paddingBottom = 0;
		
		chart.numberFormatter.numberFormat = "#";
		
		// Create series
		var series = chart.series.push(new am4charts.ColumnSeries());
		series.dataFields.valueY = "points";
		series.dataFields.categoryX = "pais";
		series.columns.template.propertyFields.fill = "color";
		series.columns.template.propertyFields.stroke = "color";
		series.columns.template.column.cornerRadiusTopLeft = 4;
		series.columns.template.column.cornerRadiusTopRight = 4;
		series.columns.template.tooltipText = "{categoryX}: [bold]{valueY}[/b]";
		
		// Add bullets
		var bullet = series.bullets.push(new am4charts.Bullet());
		var image = bullet.createChild(am4core.Image);
		image.horizontalCenter = "middle";
		image.verticalCenter = "bottom";
		image.dy = 8; // vertical offset. can be negative to move upwards
		image.width = am4core.percent(60); // reducao do tamanho para 60%
		image.y = am4core.percent(100);
		image.propertyFields.href = "bullet";
		image.tooltipText = series.columns.template.tooltipText;
		image.propertyFields.fill = "color";
		image.filters.push(new am4core.DropShadowFilter());
		
		// Enable export
		chart.exporting.menu = new am4core.ExportMenu();

		
		
    </script>
</body>
</html>
